{{template "base" .}}

{{define "title"}}Home Page{{end}}

{{define "main"}}
{{if .Authorized}}
<h2>Welcome, {{.User.UserName}}</h2>
{{end}}
<h2>Last posts</h2>
{{if .AllPosts}}
<table>
	<tr>
		<th>ID</th>
		<th>Title</th>
		<th>Author</th>
		<th>Created at</th>
		<th>Category</th>
	</tr>

	{{range .AllPosts}}
	<tr>
		<td>#{{.ID}}</td>
		<td><a href="/post?id={{.ID}}">{{.Title}}</a></td>
		<td>{{.Author}}</td>
		<td>{{.CreationDate}}</td>
		<td>{{range .Categories}} <a href="/category?name={{.}}">{{.}}</a> {{end}}</td>
	</tr>
	{{end}}
</table>
{{else}}
<p>There's no post yet...</p>
{{end}}
{{end}}